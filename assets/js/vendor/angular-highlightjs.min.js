!function(n,e){"object"==typeof exports||"object"==typeof module&&module.exports?module.exports=e(require("angular"),require("highlight.js")):"function"==typeof define&&define.amd?define(["angular","hljs"],e):n.returnExports=e(n.angular,n.hljs)}(this,function(n,e){function t(e){return function(t){switch(t){case"escape":return n.isDefined(e.hljsEscape)?e.hljsEscape:e.escape;case"no-escape":return n.isDefined(e.hljsNoEscape)?e.hljsNoEscape:e.noEscape;case"onhighlight":return n.isDefined(e.hljsOnhighlight)?e.hljsOnhighlight:e.onhighlight}}}function i(e){var t=!0;return n.forEach(["source","include"],function(n){e[n]&&(t=!1)}),t}var r=n.module("hljs",[]);r.provider("hljsService",function(){var t={};return{setOptions:function(e){n.extend(t,e)},getOptions:function(){return n.copy(t)},$get:function(){return(e.configure||n.noop)(t),e}}}),r.factory("hljsCache",["$cacheFactory",function(n){return n("hljsCache")}]),r.controller("HljsCtrl",["hljsCache","hljsService","$interpolate","$window",function(e,t,i,r){function c(n,e){var t=e?"\\\\$&":"\\$&";return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,t)}function l(n){for(var e,t=[],i=new RegExp(d,"g"),r="",c=0;null!==(e=i.exec(n));)r+=n.substring(c,e.index)+j,c=e.index+e[0].length,t.push(e[0]);return r+=n.substr(c),{code:r,tokens:t}}function o(n,e){for(var t,i=new RegExp(j,"g"),r="",c=0;null!==(t=i.exec(n));)r+=n.substring(c,t.index)+e.shift(),c=t.index+t[0].length;return r+=n.substr(c)}var u=this,h=null,a=null,s=null,f=!1,g=null,p=null,d=c(i.startSymbol())+"((.|\\s)+?)"+c(i.endSymbol()),j="âˆ«";u.init=function(n){h=n},u.setInterpolateScope=function(n){f=n,s&&u.highlight(s)},u.setLanguage=function(n){a=n,s&&u.highlight(s)},u.highlightCallback=function(n){p=n},u._highlight=function(r){if(h){var c,d,j;if(s=r,f&&(j=l(r),r=j.code),a?(d=u._cacheKey(a,!!f,r),(c=e.get(d))||(c=t.highlight(a,t.fixMarkup(r),!0),e.put(d,c))):(d=u._cacheKey(!!f,r),(c=e.get(d))||(c=t.highlightAuto(t.fixMarkup(r)),e.put(d,c))),r=c.value,f){(g||n.noop)(),j&&(r=o(r,j.tokens));var v=i(r);g=f.$watch(v,function(n,e){n!==e&&h.html(n)}),f.$apply(),h.html(v(f))}else h.html(r);h.addClass(c.language),null!==p&&n.isFunction(p)&&p()}},u.highlight=function(n,e,t){var i;return function(){var c=this,l=arguments,o=function(){i=null,t||n.apply(c,l)},u=t&&!i;r.clearTimeout(i),i=r.setTimeout(o,e),u&&n.apply(c,l)}}(u._highlight,17),u.clear=function(){h&&(s=null,h.text(""))},u.release=function(){h=null,f=null,(g||n.noop)(),g=null},u._cacheKey=function(){return Array.prototype.slice.call(arguments).join("!angular-highlightjs!")}}]);var c,l,o,u,h;return c=["$parse",function(e){return{restrict:"EA",controller:"HljsCtrl",compile:function(r,c,l){var o=r[0].innerHTML.replace(/^(\r\n|\r|\n)/,""),u=r[0].textContent.replace(/^(\r\n|\r|\n)/,"");return r.html('<pre><code class="hljs"></code></pre>'),function(r,c,l,h){var a,s=t(l);if(n.isDefined(s("escape"))?a=e(s("escape")):n.isDefined(s("no-escape"))&&(a=e("false")),h.init(c.find("code")),s("onhighlight")&&h.highlightCallback(function(){r.$eval(s("onhighlight"))}),(o||u)&&i(l)){var f;f=a&&!a(r)?u:o,h.highlight(f)}r.$on("$destroy",function(){h.release()})}}}}],o=function(e){return function(){return{require:"?hljs",restrict:"A",link:function(t,i,r,c){c&&r.$observe(e,function(e){n.isDefined(e)&&c.setLanguage(e)})}}}},l=function(n){return function(){return{require:"?hljs",restrict:"A",link:function(e,t,i,r){r&&e.$watch(i[n],function(n,t){(n||n!==t)&&r.setInterpolateScope(n?e:null)})}}}},u=function(n){return function(){return{require:"?hljs",restrict:"A",link:function(e,t,i,r){r&&e.$watch(i[n],function(n,e){n?r.highlight(n):r.clear()})}}}},h=function(e){return["$http","$templateCache","$q",function(t,i,r){return{require:"?hljs",restrict:"A",compile:function(c,l,o){var u=l[e];return function(e,c,l,o){var h=0;o&&e.$watch(u,function(e){var c=++h;if(e&&n.isString(e)){var l,u;l=i.get(e),l||(u=r.defer(),t.get(e,{cache:i,transformResponse:function(n,e){return n}}).then(function(n){c===h&&u.resolve(n)}).catch(function(){c===h&&o.clear(),u.resolve()}),l=u.promise),r.when(l).then(function(e){e&&(n.isArray(e)?e=e[1]:n.isObject(e)&&(e=e.data),e=e.replace(/^(\r\n|\r|\n)/,""),o.highlight(e))})}else o.clear()})}}}}]},function(e){e.directive("hljs",c),n.forEach(["interpolate","hljsInterpolate","compile","hljsCompile"],function(n){e.directive(n,l(n))}),n.forEach(["language","hljsLanguage"],function(n){e.directive(n,o(n))}),n.forEach(["source","hljsSource"],function(n){e.directive(n,u(n))}),n.forEach(["include","hljsInclude"],function(n){e.directive(n,h(n))})}(r),"hljs"});